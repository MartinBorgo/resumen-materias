El objetivo de la multiprogramación es tener en ejecución varios procesos al mismo tiempo con el fin de maximizar el uso de la CPU, esto lo logra conmutando los distintos procesos de manera tan rápida que el usuario no nota que la se está ejecutando una sola proceso a la vez.
El ***planificador de procesos*** selecciona un proceso disponible, de entre los muchos que hay, para que este sea ejecutado en la CPU.

#### Colas de Planificación

A medida que los procesos entran al sistema, se colocan en una ***cola de trabajo*** que contiene todos los procesos del sistema. Aquellos procesos que residen en memoria principal y están preparados y esperando para ser ejecutados se mantienen en una lista denominada ***cola de procesos preparados o cola de listos***.

>[!tldr] Procesos y PCB
>La cabecera de la cola de listos contiene punteros al primer y último bloque de control de procesos, a su vez cada PCB incluye un campo que apunta al siguiente PCB de la cola de listos.

El sistema también incluye otras colas, como por ejemplo la ***cola del dispositivo,*** en donde se colocan todos los procesos que estén la espera de una E/S.
Cada proceso nuevo se coloca inicialmente en la cola de listos, donde espera hasta ser seleccionado para su ejecución. Una vez que se asigna la CPU al proceso y éste comienza ejecutarse, se puede producir uno de los siguientes sucesos:

1. El proceso podría realizar una solicitud E/S y es colocado por consecuencia en la cola de dispositivos.
2. El proceso crea un nuevo subproceso y espera hasta que éste termine.
3. El proceso podría ser desalojado de la CPU como resultado de una interrupción y puesto de nuevo en la cola de procesos preparados.

#### Los Planificadores

El SO, como parte de su tarea de planificación, debe seleccionar de alguna manera el proceso que se encuentra en estas colas. Este proceso de selección es realizado mediante un planificador apropiado.
Estos procesos se guardan en colas en un dispositivo de almacenamiento masivo (un disco), donde se mantienen para su posterior ejecución. El ***planificador a largo plazo o planificador de trabajo*** selecciona los procesos de esta cola y luego los carga en memoria para su ejecución, este planificador es el que controla el **grado de multiprogramación**. El ***planificador a corto plazo o planificador de CPU*** selecciona de entre los procesos que ya están preparados para su ejecución y asigna la CPU a uno de ellos. También se suele hablar de un tercer planificador, el ***planificador a mediano plazo*** que es el encargado de crear los procesos.

>[!tldr] Frecuencia de Ejecución de los Planificadores
>La principal diferencia que existe entre los planificadores es que, por ejemplo, el planificador a corto plazo se va a ejecutar normalmente cada 100 milisegundos, debido al poco tiempo que hay enter la ejecución de los diferentes procesos.
>Por otro lado, el planificador a largo plazo pueden llegar a pasar incluso minutos desde la creación de un nuevo proceso y el siguiente. Además, si el grado de programación es estable, este planificador tendrá que ser invocada cada vez que termina un proceso.

Es importante que el planificador a largo plazo haga una buena elección sobre los procesos que se cargan en memoria, ya que muy a grandes rasgos los procesos pueden ser clasificados como ***orientados a E/S y orientado al procesador***, los primeros van a estar mucho más tiempo esperando por E/S y no pasaran casi nada de tiempo en la cola de listos, por lo que el planificador a corto plazo tendrá casi nula actividad; mientras que los segundos es todo lo contrario van a estar haciendo uso en todo momento de la CPU y casi nunca realizando una E/S. Por este motivo el planificador a largo plazo tiene que buscar un equilibrio entre estos tipos de procesos para que todo funcione lo más óptimo posible.