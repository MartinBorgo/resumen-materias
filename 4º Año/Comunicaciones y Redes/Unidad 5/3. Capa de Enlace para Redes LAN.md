## Estándar IEEE 802 para Redes de Área Local

Los protocolos definidos específicamente para la transmisión en redes LAN y MAN tratan cuestiones relacionadas con la transmisión de bloques de datos a través de la red. Según OSI, los protocolos de capas de red y superiores son independientes de la arquitectura de red y son aplicables a cualquier tipo de red. Así pues, el estudio de protocolos LAN está relacionado con las capas inferiores del modelo OSI.
El IEEE 802 es un estándar que especifica la arquitectura de las redes LAN, funcionando como un modelo de referencia que ha sido adoptada por todas las organizaciones que trabajan en la especificación de los estándares LAN. Además, la capa física del modelo 802 incluye una especificación del medio de transmisión y de la topología. Generalmente, esto se considera por debajo de la capa inferior del modelo OSI. Sin embargo, dado que la elección del medio de transmisión y la topología es crítica en el diseño de redes LAN, se incluye una especificación del medio.
Por encima de la capa física se encuentran las funciones asociadas a los servicios ofrecidos a los usuarios LAN. Entre ellas se encuentran las siguientes:

1. En transmisión, ensamblado de datos en tramas con campos de dirección y de detección de errores.
2. En recepción, desensamblado de tramas, reconocimiento de dirección y detección de errores.
3. Control de acceso al medio de transmisión LAN.
4. Interfaz con las capas superiores, control de errores y de flujo.

Estas funciones se asocian generalmente a la capa del enlace de datos, la cual de acuerdo al estándar se divide en dos subcapas. La capa de ***control de enlace lógico (LLC)*** que se encarga de brindar los servicios descritos en el último ítem, y la capa de ***control de acceso al medio (MAC)*** que se encarga de ofrecer el resto de prestaciones. Esta separación de funciones se debe a las siguientes razones:

1. La lógica necesaria para la gestión del acceso a un medio compartido no se encuentra en esta capa de control de enlace de datos tradicional.
2. Cada red LAN ofrece una forma distinta de trama MAC para el mismo LLC.

Los datos del nivel superior se pasan hacia abajo al nivel LLC, que añade una cabecera de información de control, posteriormente se lo pasa a la capa MAC que termina de añadir sus encabezados quedando lista la trama para ser transmitida.

![[formato-trama.png]]

### Capa de Control de Enlace Lógico (LLC)

La capa de control de enlace lógico en redes LAN es similar en varios aspectos a otras capas de enlace de uso común, es decir, se encarga de la transmisión de tramas entre dos estaciones adyacentes. La principal diferencia es que esta capa presenta dos características no compartidas por la mayor parte de otros protocolos de control de enlace:

1. Debe admitir el acceso múltiple, consecuencia de la naturaleza de medio compartido del enlace.
2. La capa de control de acceso al medio lo descarga de algunos detalles del acceso al enlace físico.

El direccionamiento en este caso implica la especificación de un origen y destino. Las direcciones que se utilizan en la capa de control de enlace lógico, se denominan ***puntos de acceso al servicio (SAP)***.
El protocolo LLC brinda todos los [[4º Año/Comunicaciones y Redes/Unidad 5/1. Capa de Enlace de Datos#Servicios de Transmisión|servicios de transmisión]] mencionados en la introducción a la capa de enlace de datos. Este protocolo es muy similar a HDLC, aun así poseen sus diferencias. En términos generales una trama estaría conformada de la siguiente manera:

![[formato-trama-llc.png]]

Los campos ***DSAP*** (Destination Service Access Point) y ***SSAP*** (Source Service Access Point) contiene una dirección de 7 bits que especifica el destino y el origen. Un bit del campo DSAP indica si la dirección es individual o de grupo, mientras que un bit del campo SSAP indica si la PDU es una orden o una respuesta. El formato del campo de control es idéntico al de HDLC, haciendo uso de números de secuencia de 7 bits.

>[!info] Importancia de la Capa de Control de Enlace Lógico
>La capa de control de enlace lógico es sumamente importante, ya que es la encargada de abstraer los diferentes formatos de tramas MAC.

### Capa de Control de Acceso al Medio (MAC)

Todas las LAN y MAN constan de un conjunto de dispositivos que deben compartir la capacidad de transmisión de la red, de manera que se requiere algún método de control de acceso al medio con objeto de hacer un uso eficiente de esta capacidad. Ésta es la función del protocolo de control de acceso al medio.
El control de los dispositivos al medio físico se puede realizar de forma centralizada o distribuida. A su vez la capa de control de acceso al medio debe encargarse de como se transmitirán los datos al medio, es decir, si se utilizan técnicas de transmisión síncronas o asíncronas.
Esta capa recibe un bloque de datos de la capa superior (LLC) y debe realizar funciones relacionadas con el acceso al medio y la transmisión de datos. Para conseguir esto se encapsula todo el mensaje LLC en una trama, cuyo formato varían de acuerdo al protocolo MAC al que se haga referencia

>[!tldr] Formato Genérico de Trama MAC
>En general, todas las tramas MAC tienen un formato similar al que se muestra en la imagen presentada anteriormente. Los campos de esta trama son:
>
>- **Control MAC**: Este campo contiene información de control de protocolo necesaria para el funcionamiento del protocolo MAC. Por ejemplo, el nivel de prioridad o tamaño de la trama.
>- **Dirección MAC de destino**: punto de conexión física MAC en la LAN del destino de la trama.
>- **Dirección MAC de origen**: punto de conexión física MAC en la LAN del origen de la trama.
>- **LLC**: Datos LLC de la capa superior.
>- **CRC**: Campo de comprobación de redundancia cíclica, también conocido como campo de secuencia de comprobación de trama (FCS). Este campo se emplea para la detección de errores.
>
>En la mayor parte de los protocolos englobados por esta capa, es el mismo protocolo el responsable tanto de la detección de errores como de la recuperación de estos mismos a través de la solicitud de retransmisión de la trama errónea.

### Técnicas de Control de Acceso al Medio

#### ALOHA

***ALOHA*** es una técnica que permite a una estación enviar una trama siempre que esta lo necesite. Después de la transmisión, la estación escucha el medio para recibir una confirmación, lo que indicaría que la trama fue recibida correctamente. Si no se recibe confirmación, la estación retransmite la trama, y tras varios intentos fallidos, desiste. Una de las principales desventajas de esta técnica es la alta probabilidad de colisiones entre tramas, lo que limita la utilización máxima del canal a aproximadamente el 18%. Este problema se agrava a medida que aumenta la carga en la red. Existe una mejora denominada ALOHA ranurado que disminuye la posibilidad de colisión y aumenta el uso del canal a un 37%, aun así no es el mejor de los mecanismos de acceso existentes.

#### Acceso Múltiple con Detección de Portadora (CSMA)

***CSMA (Carrier Sense Multiple Access)*** es una técnica de acceso múltiple en la cual cuando una estación desea transmitir una trama, primero escucha el medio para detectar si hay alguna transmisión en curso (detección de portadora). Si el medio está ocupado, la estación espera, pero si está libre, transmite la trama. Sin embargo, si dos o más estaciones intentan transmitir al mismo tiempo, puede ocurrir una colisión, debido a que la señal portadora no ha logrado propagarse lo suficientemente rápido. Para gestionar este riesgo, la estación espera una confirmación tras la transmisión. Si no recibe la confirmación luego de cierto tiempo se asume que hubo una colisión y se retransmite la trama.
La principal desventaja de CSMA es que, a pesar de reducir la probabilidad de colisiones, todavía pueden ocurrir colisiones, especialmente si varias estaciones intentan transmitir simultáneamente. Variantes como CSMA p-persistente pueden manejar cuidadosamente el valor de $p$ para evitar inestabilidades bajo alta carga, donde las colisiones repetidas pueden llevar a una caída significativa del rendimiento.

#### Acceso Múltiple con Detección de Portadora con Detección de Colisiones (CSMA/CD)

***CSMA/CD (Carrier Sense Multiple Access with Collision Detection)*** es una versión mejorada de CSMA que permite a una estación transmitir solo si detecta que el medio está libre. Si el medio está ocupado, la estación espera. Si durante la transmisión se detecta una colisión, la estación envía una señal de interferencia para notificar a todas las estaciones de la colisión y detiene la transmisión. Luego, la estación espera un tiempo aleatorio antes de intentar retransmitir. Esta técnica reduce el tiempo desaprovechado al tiempo necesario para detectar una colisión, lo que mejora la eficiencia del uso del canal.
La principal desventaja de CSMA/CD es que, si bien minimiza el tiempo perdido por colisiones, todavía puede experimentar inestabilidad en situaciones de alta carga, especialmente si se utilizan tramas cortas en comparación con el retardo de propagación. Para mitigar esto, se utiliza la técnica de ***espera exponencial binaria*** en redes como Ethernet, donde el tiempo de espera aumenta exponencialmente con cada intento fallido, ayudando a evitar que las colisiones repetidas lleven a la congestión de la red.

## Ethernet

Las redes LAN de alta velocidad más ampliamente utilizadas en la actualidad son las basadas en Ethernet, desarrolladas por el comité de estándares IEEE 802.3. Como ya mencionamos anteriormente cada protocolo MAC implementa a su manera el control de acceso al medio, Ethernet concretamente utiliza la técnica conocida como ***CSMA/CD***.
El formato normal de una trama Ethernet está compuesta por los siguientes campos:

- **Preámbulo**: Consiste en un campo compuesto por 7 octetos de bits ceros y unos alternados, utilizados para establecer la sincronización entre el emisor y el receptor.
- **Delimitador del comienzo de la trama (SFD)**: Consiste en la secuencia de bits 10101011, que indica el comienzo real de la trama y posibilita que el receptor pueda localizar el primer bit del resto de la trama.
- **Dirección de destino (DA)**: Especifica la estación o estaciones a las que va dirigida la trama. Puede tratarse de una única dirección física, una dirección de grupo o una dirección global.
- **Dirección de origen (SA)**: Especifica la estación que envió la trama.
- **Longitud/Tipo**: Contiene la longitud del campo de datos LLC expresado en octetos, o el campo Tipo de Ethernet, dependiendo de que la trama siga la norma IEEE 802.3 o la especificación primitiva de Ethernet. En cualquier caso, el tamaño máximo de la trama, excluyendo el preámbulo y el SFD, es de 1518 octetos.
- **Datos LLC**: Unidad de datos proporcionada por el LLC.
- **Relleno**: Consiste en octetos añadidos para asegurar que la trama sea lo suficientemente larga como para que la técnica de detección de colisiones funcione correctamente.
- **Secuencia de Comprobación de Trama (FCS)**: Está constituido por una comprobación de redundancia cíclica de 32 bits, calculada teniendo en cuenta todos los campos excepto el preámbulo, el SFD y el FCS.

![[formato-trama-ethernet.png]]
