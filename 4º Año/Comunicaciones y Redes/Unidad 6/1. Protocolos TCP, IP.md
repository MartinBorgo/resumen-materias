- TCP: Transmision Control Protocol (Protocolo de Control de Transmisión).
- IP: Internet Protocol (Protocolo Internet). 
- El desarrollo de estos protocolos comenzó en los 70. 
- Objetivo: permitir comunicaciones entre varios sistemas independientes y de distintos fabricantes (Interconexión). 
- Integrado a sistemas operativos Unix-Linux, y Windows.
- Es la clave de **interoperatividad** en Internet.
- Con TCP/IP se forman redes lógicas, independientes del hardware. Es un ejemplo de sistemas abiertos, porque no depende de una tecnología propietaria o de un solo proveedor. Las especificaciones técnicas para poder escribir programas que implementen los protocolos están disponibles para el público en las RFC (Request For Comments) 
- Los protocolos TCP/IP son controlados y actualizados por la: IAB (Internet Activities Board).
	- IRTF (Internet Research Task Force) 
	- IETF (Internet Engineering Task Force): formados generalmente por voluntarios provenientes de universidades, centros de desarrollo y empresas.

### Internet

- Internet: Un conjunto de redes interconectadas (cada una identificada específicamente). Inter-networks 
- Sistemas finales: 
	- Dispositivos pertenecientes a esas redes. 
- Sistemas y dispositivos intermedios: 
	- Proveen caminos de comunicación entre las redes realizando tareas de ruteo de los paquetes pertenecientes a las distintas (routers-gateways). 
- Protocolos de comunicación: 
	- conjunto de protocolos TCP/I

### Arquitectura TCP/IP

![[arquitectura_tcp_ip.png]]

### Servicios de los protocolos TCP/IP

Los protocolos TCP/IP proporcionan a los usuarios de las redes servicios de comunicación de datos, como:
- Transferencia de archivos entre equipos 
- Correo electrónico 
- Acceso a archivos distribuidos 
- Administración de sistemas 
- Conexiones remotas de equipos 
- Manejo de ventanas 
- Utilización de enrutadores Internet para ejecutar funciones de encaminamiento 
- Transmisión de datagramas 
- Traducción de direcciones de distinto nivel

### Modelo TCP/IP

Nivel de aplicación:
	En este nivel se encuentran las aplicaciones disponibles para los usuarios. Una aplicación es un proceso que coopera con otro proceso en una misma o distinta computadora. Ej.:
		• **FTP** (Fiel Transfer Protocol) : Transferencia de archivos. 
		• **SMTP** (Simple Mail Transfer Protocol) : Correo electrónico. 
		• **SNMP** (Simple Network Management Protocol) : Administración de la red. 
		• **HTTP**: (HiperText Transfer Protocol): Transferencia de hipertexto.

Nivel de transporte:
	Suministra a las aplicaciones los servicios de comunicaciones de extremo a extremo utilizando dos protocolos:
		• **TCP o Protocolo de Control de la Transmisión (Transmission Control Protocol)**, orientado a conexión. 
		• **UDP o Protocolo para Datagramas de Usuario (User Datagram Protocol)**, no orientado a conexión.

Nivel Internet:
	Proporciona los servicios básicos necesarios para que los datagramas puedan alcanzar sus destinos. A este nivel pertenecen los protocolos:
		• **IP o Protocolo Internet (Internet Protocol)** : realiza el encaminamiento de datagramas hasta el destino. 
		• **ICMP o Protocolo de Mensajes de Control Internet (Internet Control Messages Protocol)**: utilizado para informar sobre los problemas que puedan aparecer.

Nivel Enlace:
	Función agregada de traducción de direcciones, en relación a redes de área local. Protocolos:
		• **ARP o Protocolo de Resolución de Direcciones (Addres Resolution Protocol)** : traduce direcciones Internet (IP) a direcciones físicas de una red (MAC) 
		• **RARP o Protocolo de Resolución de Direcciones Inversas (Reverse Addres Resolution Protocol)** : traduce las direcciones físicas (MAC) a direcciones Internet (IP).

Interfaz de red:
	Es la interfaz a la red real. TCP/IP no especifica ningún protocolo concreto, pero puede utilizar las interfaces disponibles para LAN como Ethernet (IEEE 802.3) o Token Ring (IEEE 802.2), redes de paquetes X.25 o FR, transmisiones asincrónicas, etc.

Nivel Físico:
	Es análogo a los niveles físicos de otras arquitecturas, es decir, puede integrar los servicios físicos definidos como RS232, V.24, etc.

### Niveles funcionales en TCP/IP

![[niveles_funcionales_TCP_IP.png]]

### Capa de Red Direcciones IP

#### Capa Internet

 • **IP- Internet Protocol**: protocolo sin conexión que proporciona un servicio de datagramas o paquetes IP que es la unidad básica de información de Internet. Definido en la RFC 791
	 • **Datagramas**: paquetes de información que se envían a través de los encaminadores en función de su dirección IP y tablas de rutas que posee cada uno de ellos. 
	 • Dispositivo de conmutación: ROUTER

#### Funciones de la capa de red

Cada conmutador o router deberá:
	• **Determinar el camino**: para cada datagrama seleccionar la ruta desde la fuente al destino, usando algún algoritmo de ruteo. 
	• **Encaminamiento**: cuando llega un datagrama o paquete a la entrada de un router, este deberá moverlo hasta la puerta de salida adecuada.

![[funciones_capa_red.png]]

#### Capa Internet

Datagrama IPv4:
	![[datagrama_IPv4.png]]

#### Estructuras de direcciones IP

![[estructura_direcciones_IP.png]]

![[estructura_direcciones_ip_clases.png]]

![[estructura_direcciones_IP_clases2.png]]

Dirección **Loopback**: 127.0.0.0 pruebas de TCP/IP
En todas las direcciones : 
• bits todos 1 usada para broadcast. 
	Ej.: 128.66.255.255 
• bits todos 0 identifican a la red. 
	Ej.: 128.66.0.0

#### Asignación de direcciones 

**ICANN (Internet Corporation for Assigned Names and Numbers)(1998)**: asigna direcciones IP y gestiona el servicio de nombres de dominio. 
	A nivel regional: ARIN, RIPE, APNIC

www.icann.org
www.arin.net 
www.lacnic.net

#### Esquema de direccionamiento IP

La dirección IP identifica la conexión entre una computadora y una red.
![[esquema_direccionamiento_IP.png]]

### Ruteo IP

#### Modelar una red 

Una red se puede modelar como un grafo, con nodos y arcos de unión (links).

![[modelar_red.png]]

Cada **arco** tiene un costo determinado por varias características. Cada **nodo** arma una tabla con estos costos y los nodos alcanzados.

- El ruteo es lo que une a toda la red Internet. 
- Sin ruteo, el tráfico IP estaría limitado a una sola red física. 
- **Ruteo**: acto de pasar datagramas basándose en información de las tablas de ruteo. 
- **Protocolos de ruteo**: encargados de recolectar la información para armar esas tablas. 
- **Objetivo**: determinar la mejor ruta para cada dirección destino y distribuir información de ruteo a todos los sistemas de red.

#### Reenvió de datagramas IP

Los datagramas atraviesan la red desde su origen al destino siguiendo una trayectoria que se va definiendo en los enrutadores. Cada uno de estos los reciben, analizan su dirección destino y en función de la información de su tabla de enrutamiento determinan el próximo salto. 
La tabla tiene entradas con destino y salto siguiente para cada uno. Ver ejemplo de tabla del enrutador R2.
![[reenvio_datagramas.png]]

#### Direccionamiento a subredes
En la práctica varias redes físicas pueden agruparse en una sola dirección de red, por lo que se usa un mecanismo llamado de direccionamiento de subred (subnetting). (Por eso la columna máscara de red) 
Hay máscaras de red predefinidas para cada clase de dirección IP. Los bits en ON dentro de la máscara indican bits de red.
![[direccionamiento_subredes.png]]

#### Tablas de ruteo

Almacenan números de redes IP y direcciones IP de gateways/routers para que un equipo pueda decidir por donde enviar un datagrama IP. 
Ej.:
![[tabla_ruteo.png]]

#### Incorporación de datos a las tablas

Como hace un router para incluir datos en su tabla? 
**Rutas estáticas**: agregadas en forma manual por el administrador de la red. 
	Route add –net 0.0.0.0 gw 157.90.53.1 
**Rutas dinámicas**: propagación de la información de ruteo de los gateways (routers) en forma automática entre vecinos. 
	 Cuando? Cada x seg. o cuando se actualiza una ruta. 
	 Formato {Destino, Costo}

#### Algoritmo de envió de un datagrama IP 

Extraer la dirección IP destino del datagrama 
Extraer la dirección de red de la dirección IP 
**Si** la dirección de red destino es mi dirección de red 
	Enviar el datagrama a destino usando red física 
**Sino Si** la dirección destino coincide con una dirección de host dentro de la tabla 
	Enviar el datagrama al gateway especificado en la entrada de la tabla **Sino Si** la dirección destino coincide con una dirección de red dentro de la tabla 
		Enviar el datagrama al gateway especificado en la entrada de la tabla 
		**Sino Si** hay una ruta default dentro de la tabla 
			Enviar el datagrama al gateway especificado en la entrada default 
			**Sino** 
				Enviar a la fuente un mensaje ICMP de “ No hay ruta al host"

#### Sistemas autónomos -SA

Conjunto de redes y gateways controlados por una única autoridad administrativa, con el fin de disminuir las tablas de ruteo. 
Cuentan con mecanismos para recolectar información de ruteo y enviárselas o otros sistemas independientes.
![[sistemas_autonomos.png]]

#### Protocolos de ruteo

El criterio de elección de ruta es lo que diferencia a los distintos protocolos. 
	Ejemplos de criterios: cantidad de saltos, velocidad, delay y también razones de política organizacional y de seguridad.
Ruteo Interno (IGP): 
	 Routing Information Protocol - RIP 
	 Open Shortest Path First – OSPF 
 Ruteo Externo:
	 Exterior Gateway Protocol – EGP 
	 Border Gateway Protocol - BGP

#### Estilos de protocolo

**Vector – Distance (BellmanFord):**
	Los gateways o routers envían su información de ruteo en forma de broadcast, diciendo que redes pueden ser alcanzadas a través de el y su costo. 
	Cuando los demás routers reciben este mensaje, guardan la alcanzabilidad de cada red y le suman 1 a cada costo. 
	Se mantiene una tabla (vector) que da la mejor distancia conocida a cada destino y la ruta para llegar.
	![[protocolo_vector_distance.png]]

**RIP – Routing Internet Protocol**:
	Características:
	• La mejor ruta es la que tiene menor cantidad de saltos (hops). Máximo 15 
	• La cantidad de saltos representa los gateways o routers que los datos deben atravesar para llegar a destino. 
	• Emplea algoritmo de vector-distance. 
	• Cuando se reciben actualizaciones (aprox. cada 90 seg.) se modifican las tablas de ruteo. 
	• No toma en cuenta congestión de rutas 
	• Usa TCP o UDP

**Link – State:**
	Mas eficiente para redes grandes. 
	Cada gateway mantiene un “mapa” en memoria indicando el estado de todos los enlaces de la red. 
	Periódicamente cada uno avisa a los demás si puede hablar con sus vecinos. 
	Entonces, actualizan el mapa de la red y se recalculan las rutas mas cortas.
	![[protocolo_link_state.png]]

**OSPF – Open Shortest Path First:**
	Características: 
	• Protocolo dinámico que emplea estado del enlace, que detecta y aprende las mejores rutas (alcanzables) a los distintos destinos. 
	• Mas reciente que RIP, corrige limitaciones de este. 
	• Emplea multicast para reducir la carga en los sistemas. 
	• Usa directamente IP.

**Protocolos de ruteo interno:**
![[protocolo_RIP.png]]
![[protocolo_OSPF.png]]

#### Configuración de routers

Los routers tienen múltiples interfaces de red y software que decide como se rutea el trafico. 
Cada interface tendrá una única dirección de red y estará en otra red o subred. 
Diferentes tipos: 
	PC personales: usando por ej. Linux 
	Comerciales: Cisco, Proteon, etc.

### Arquitectura genérica de un router

![[arquitectura_router.png]]

**Puertos de entrada:** realizan varias funciones..: 
	• Terminadores del enlace físico 
	• Funciones de nivel enlace (protocolos) 
	• Encaminamiento (copia de tabla ruteo) 

**Puertos de salida:** toman los datagramas almacenados en el buffer de cada puerto salida y los transmite sobre un enlace. 
	También 
	• Terminadores del enlace físico 
	• Funciones de nivel enlace (protocolos)

**Conmutación:** el sistema de conmutación es el núcleo del router, y lo que determina la forma en que un paquete es desplazado del puerto de entrada al de salida.
	Hay tres técnicas básicas usadas por routers:
	• Mediante memoria 
	• Mediante bus 
	• Mediante una red de interconexión (cruce de barras)

Ejemplo: Conmutación mediante memoria
	• Conmutación de puertos de entrada y salida a cargo de el procesador de ruteo 
	• Los puertos funcionan como dispositivos de E/S 
	• Ante una interrupción de entrada el paquete se copia a la memoria del procesador 
	• El procesador extrae IP destino, busca el puerto salida correcto en tabla y copia en el paquete en los buffer de salida. 
	• Mejora: búsqueda de direcciones y manejo de tablas en tarjetas de entrada

**Procesador de ruteo:** Funciones 
	• Ejecutar los protocolos de ruteo 
	• Mantener información de ruteo y tablas de encaminamiento 
	• Cumplir funciones de gestión de red dentro del router

### Algunos comandos de Administración

**Ping:** Packet Internet Groper. Hace referencia a un paquete ICMP y su respuesta. Se usa para testear la alcanzabilidad de un dispositivo de red. 
**Netstat:** se utiliza para ver información estadística detallada de cada interface de red, sockets de red y la tabla de ruteo. 
**Traceroute:** indica la ruta que toman los paquetes individuales que se intercambian entre los hosts de una red. 
**Route:** sirve para agregar o borrar manualmente entradas en la tabla de ruteo.

### RFC Request for Comments

www.rfc-editor.org
www.rfc-es.org

• ARP: 826 
• RARP: 903 
• IP:791- 1042 (eth) Y OTRAS 
• ICMP: 792- 950 
• Ruteo:
	RIP: 2453 
	OSPF: 232